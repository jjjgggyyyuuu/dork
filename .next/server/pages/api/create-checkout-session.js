"use strict";(()=>{var e={};e.id=352,e.ids=[352],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6090:e=>{e.exports=import("stripe")},7275:(e,s,t)=>{t.a(e,async(e,r)=>{try{t.r(s),t.d(s,{config:()=>l,default:()=>u,routeModule:()=>d});var o=t(1802),a=t(7153),n=t(6249),i=t(9386),c=e([i]);i=(c.then?(await c)():c)[0];let u=(0,n.l)(i,"default"),l=(0,n.l)(i,"config"),d=new o.PagesAPIRouteModule({definition:{kind:a.x.PAGES_API,page:"/api/create-checkout-session",pathname:"/api/create-checkout-session",bundlePath:"",filename:""},userland:i});r()}catch(e){r(e)}})},9386:(e,s,t)=>{t.a(e,async(e,r)=>{try{t.r(s),t.d(s,{default:()=>handler});var o=t(6090),a=e([o]);o=(a.then?(await a)():a)[0];let n=new o.default(process.env.STRIPE_SECRET_KEY);async function handler(e,s){if("POST"!==e.method)return s.status(405).json({message:"Method not allowed"});try{console.log("Creating checkout session...");let{priceId:t=process.env.NEXT_PUBLIC_STRIPE_PRICE_ID}=e.body;if(!t)return console.error("Stripe price ID is not configured"),s.status(500).json({message:"Stripe price ID is not configured",error:"Missing NEXT_PUBLIC_STRIPE_PRICE_ID environment variable"});let r=process.env.NEXT_PUBLIC_APP_URL||"https://domain-valuator.com";console.log(`Using app URL: ${r}`);let o=await n.checkout.sessions.create({payment_method_types:["card"],line_items:[{price:t,quantity:1}],mode:"subscription",success_url:`${r}/success?session_id={CHECKOUT_SESSION_ID}`,cancel_url:`${r}/`,metadata:{appName:process.env.NEXT_PUBLIC_APP_NAME||"Domain Valuator"}});return console.log(`Checkout session created: ${o.id}`),s.status(200).json({sessionId:o.id})}catch(e){return console.error("Stripe checkout error:",e),s.status(500).json({message:"Failed to create checkout session",error:e.message})}}r()}catch(e){r(e)}})}};var s=require("../../webpack-api-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[222],()=>__webpack_exec__(7275));module.exports=t})();