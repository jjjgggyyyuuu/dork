"use strict";(()=>{var e={};e.id=413,e.ids=[413],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6090:e=>{e.exports=import("stripe")},7763:(e,r,t)=>{t.a(e,async(e,a)=>{try{t.r(r),t.d(r,{config:()=>c,default:()=>u,routeModule:()=>d});var s=t(1802),n=t(7153),o=t(6249),i=t(8078),l=e([i]);i=(l.then?(await l)():l)[0];let u=(0,o.l)(i,"default"),c=(0,o.l)(i,"config"),d=new s.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/create-portal-link",pathname:"/api/create-portal-link",bundlePath:"",filename:""},userland:i});a()}catch(e){a(e)}})},8078:(e,r,t)=>{t.a(e,async(e,a)=>{try{t.r(r),t.d(r,{default:()=>handler});var s=t(6090),n=e([s]);s=(n.then?(await n)():n)[0];let o=new s.default(process.env.STRIPE_SECRET_KEY);async function handler(e,r){if("POST"!==e.method)return r.status(405).json({message:"Method not allowed"});try{let{customerId:t}=e.body;if(!t)return r.status(400).json({message:"Customer ID is required"});let a=await o.billingPortal.sessions.create({customer:t,return_url:process.env.NEXT_PUBLIC_APP_URL});return r.status(200).json({url:a.url})}catch(e){return console.error("Stripe portal error:",e),r.status(500).json({message:"Failed to create portal link",error:e.message})}}a()}catch(e){a(e)}})}};var r=require("../../webpack-api-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[222],()=>__webpack_exec__(7763));module.exports=t})();